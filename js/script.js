// Code goes here
 
 var json = {
        solutions: [
   {  
      "name":"Land Use",
      "childs":[  
         {  
            "name":"Afforestation",
            "description":"Afforestation—creating forests where there were none before—creates a carbon sink, drawing in and holding on to carbon and distributing it into the soil."
         },
         {  
            "name":"Bamboo",
            "description":"Bamboo rapidly sequesters carbon in biomass and soil and can thrive on degraded lands. It has more than 1,000 uses, from buildings to food to paper."
         },
         {  
            "name":"Coastal Wetlands",
            "description":"The world’s salt marshes, mangroves, and sea grasses provide vital habitat, flood protection, and water filtration, and sequester huge amounts of carbon in plants and soil."
         },
         {  
            "name":"Forest Protection",
            "description":"With mature canopy trees and complex understories, forests contain 300 billion tons of carbon and are the greatest repositories of biodiversity on the planet."
         },
         {  
            "name":"Indigenous Peoples’ Land Management",
            "description":"Growing the acreage under secure indigenous land tenure can increase above- and belowground carbon stocks and reduce greenhouse gas emissions from deforestation."
         },
         {  
            "name":"Peatlands",
            "description":"Although peatlands cover just 3 percent of the earth’s land area, they are second only to oceans in the amount of carbon they store."
         },
         {  
            "name":"Perennial Biomass",
            "description":"Using perennial bioenergy crops (e.g., switchgrass, silver grass, willow, eucalyptus) rather than annuals (e.g., corn) reduces emissions and raises carbon sequestration in soil."
         },
         {  
            "name":"Temperate Forests",
            "description":"Ninety-nine percent of temperate forests have been altered in some way—timbered, converted to agriculture, disrupted by development. Restoring them sequesters carbon and revives ecosystems."
         },
         {  
            "name":"Tropical Forests",
            "description":"Tropical forests have suffered extensive clearing, fragmentation, degradation, and depletion of biodiversity. Restoring them may sequester as much as six gigatons of carbon dioxide per year."
         }
      ]
   },
   {  
      "name":"Women and Girls",
      "childs":[  
         {  
            "name":"Educating Girls",
            "description":"Education lays a foundation for vibrant lives for girls and women, their families, and their communities. It also avoids emissions by curbing population growth."
         },
         {  
            "name":"Family Planning",
            "description":"Securing women’s right to voluntary, high-quality family planning dramatically improves the health and well-being of women and their children. It also avoids emissions."
         },
         {  
            "name":"Women Smallholders",
            "description":"If women smallholders receive equal farming resources and land rights, their yields will rise by 20 to 30 percent, avoiding emissions from deforestation."
         }
      ]
   },
   {  
      "name":"Materials",
      "childs":[  
         {  
            "name":"Alternative Cement",
            "description":"Cement, a vital material for infrastructure, generates 5 to 6 percent of annual emissions. The key strategy to reduce them is to change its composition."
         },
         {  
            "name":"Bioplastic",
            "description":"Ninety percent of plastics could be derived from plants instead of fossil fuels. Bioplastics can be biodegradable and often have lower emissions."
         },
         {  
            "name":"Household Recycling",
            "description":"Household recycling can reduce emissions because producing new products from recovered materials often saves energy. It also reduces resource extraction and creates jobs."
         },
         {  
            "name":"Industrial Recycling",
            "description":"Industrial recycling reduces emissions when new products are made from recovered materials, rather than virgin resources. It can also address the challenge of resource scarcity."
         },
         {  
            "name":"Recycled Paper",
            "description":"Half of paper is used once and then trashed. Recycling makes paper’s journey circular, rather than a straight line from logging to landfill, which reduces emissions."
         },
         {  
            "name":"Refrigerant Management",
            "description":"The primary chemical refrigerant, HFCs, is a potent greenhouse gas. Emissions are avoided by managing leaks and disposal and by phasing out the use of HFCs."
         },
         {  
            "name":"Water Saving - Home",
            "description":"Cleaning, transporting, and heating water requires energy. More efficient fixtures and appliances can reduce home water use by 45 percent, thereby reducing emissions."
         }
      ]
   },
   {  
      "name":"Buildings and Cities",
      "childs":[  
         {  
            "name":"Bike Infrastructure",
            "description":"Infrastructure is essential for supporting safe, pleasant, and abundant bicycle use—which can relieve city congestion, improve public health, and reduce emissions from cars."
         },
         {  
            "name":"Building Automation",
            "description":"Building automation systems serve as the “brain” of large commercial buildings. Controlling temperature, lighting, and more, they can improve energy efficiency and occupants’ comfort."
         },
         {  
            "name":"District Heating",
            "description":"With district systems, a central plant channels hot and/or cool water via a network of pipes to many buildings—heating and cooling them more efficiently."
         },
         {  
            "name":"Green Roofs",
            "description":"Green roofs use soil and vegetation as living insulation. Cool roofs reflect solar energy. Both reduce building energy use for heating and/or cooling."
         },
         {  
            "name":"Heat Pumps",
            "description":"Heat pumps transfer heat from a cold space to a hot one. Highly efficient, they can dramatically lower building energy use for heating and cooling."
         },
         {  
            "name":"Insulation",
            "description":"Insulation is one of the most cost-effective ways to make buildings more energy efficient—both in new construction and through retrofitting older buildings."
         },
         {  
            "name":"Landfill Methane",
            "description":"Landfills are a top source of methane emissions. Instead, landfill methane can be captured, preventing emissions, and used as a fairly clean energy source."
         },
         {  
            "name":"LED Lighting (Commercial)",
            "description":"Lighting accounts for 15 percent of global electricity use. LEDs (light emitting diodes) require less energy and create less waste heat than other bulbs."
         },
         {  
            "name":"LED Lighting (Household)",
            "description":"By transferring most of their energy use into creating light—rather than heat, like older technologies—LEDs reduce electricity consumption and air-conditioning loads."
         },
         {  
            "name":"Net Zero Buildings",
            "description":"A net zero building is one that has zero net energy consumption, producing as much energy, through onsite renewables, as it uses in a year."
         },
         {  
            "name":"Retrofitting",
            "description":"Up to 80 percent of the energy buildings consume is wasted. Retrofitting them can address waste through efficient insulation, heating and cooling systems, and lighting."
         },
         {  
            "name":"Smart Glass",
            "description":"Compared to walls, windows are inefficient insulators. Smart glass can respond to sunlight and weather, reducing a building’s energy load for lighting, heating, and cooling."
         },
         {  
            "name":"Smart Thermostats",
            "description":"Thermostats are mission control for heating and cooling homes. Smart thermostats use algorithms and sensors to learn and become more energy efficient over time."
         },
         {  
            "name":"Walkable Cities",
            "description":"Walkable cities prioritize two feet over four wheels through careful planning and design. As people need to drive less and want to walk more, emissions decrease."
         },
         {  
            "name":"Water Distribution",
            "description":"Pumping water requires enormous amounts of energy. By minimizing leaks in water-distribution networks—currently wasting 8.6 trillion gallons annually—both energy and water are saved."
         }
      ]
   },
   {  
      "name":"Food",
      "childs":[  
         {  
            "name":"Biochar",
            "description":"Biochar results from slowly baking biomass in the absence of oxygen. Retaining most of the feedstock’s carbon, biochar can be buried for sequestration, while enriching soil."
         },
         {  
            "name":"Clean Cookstoves",
            "description":"Traditional cooking practices produce toxic smoke and 2 to 5 percent of annual greenhouse gas emissions. Clean cookstoves reduce emissions and protect human health."
         },
         {  
            "name":"Composting",
            "description":"From backyard bins to industrial-scale operations, composting food waste converts organic material into stable soil carbon and valuable fertilizer, averting methane emissions."
         },
         {  
            "name":"Conservation Agriculture",
            "description":"Conservation agriculture avoids tilling and employs cover crops and crop rotation. By protecting the soil, it makes land more resilient and sequesters carbon."
         },
         {  
            "name":"Farmland Irrigation",
            "description":"Pumping and distributing water requires large quantities of energy. Drip and sprinkler irrigation, among other practices and technologies, make water use more precise and efficient."
         },
         {  
            "name":"Farmland Restoration",
            "description":"The world’s abandoned farmland is an opportunity for drawdown. Restoring it sequesters carbon and can improve food security, farmers’ livelihoods, and ecosystem health."
         },
         {  
            "name":"Improved Rice Cultivation",
            "description":"Flooded rice paddies produce large quantities of methane—10 percent of agricultural emissions. Techniques exist to reduce methane, while improving production and sequestering carbon."
         },
         {  
            "name":"Managed Grazing",
            "description":"Managed grazing imitates the activity of migratory herds to improve soil health, carbon sequestration, water retention, and forage productivity. \f"
         },
         {  
            "name":"Multistrata Agroforestry",
            "description":"Multistrata agroforestry blends taller trees and one or more layers of crops. It achieves high rates of carbon sequestration, similar to forests, while producing food."
         },
         {  
            "name":"Nutrient Management",
            "description":"When overused, nitrogen fertilizers destroy soil organic matter, pollute waterways, and create nitrous oxide. They can be more efficiently managed to reduce these negative impacts."
         },
         {  
            "name":"Plant-Rich Diet",
            "description":"Meat-centric diets come with a steep climate price tag: one-fifth of global emissions. Plant-rich diets dramatically reduce emissions and rates of chronic disease."
         },
         {  
            "name":"Reduced Food Waste",
            "description":"Producing uneaten food squanders resources and generates 8 percent of emissions. Interventions can reduce waste at key points, as food moves from farm to fork."
         },
         {  
            "name":"Regenerative Agriculture",
            "description":"The practices of regenerative agriculture increase carbon-rich soil organic matter. Enhancing and sustaining the health of the soil sequesters carbon and improves productivity."
         },
         {  
            "name":"Silvopasture",
            "description":"Silvopasture is an ancient practice, integrating trees and pasture into a single system for raising livestock. It sequesters carbon while improving animal health and productivity."
         },
         {  
            "name":"System of Rice Intensification",
            "description":"SRI is a holistic approach to sustainable rice cultivation. It improves soil, lowers inputs of seeds and water, and increases yields, while reducing emissions."
         },
         {  
            "name":"Tree Intercropping",
            "description":"Like all regenerative land-use practices, tree intercropping—intermingling trees and crops—increases the carbon content of the soil and productivity of the land."
         },
         {  
            "name":"Tropical Staple Trees",
            "description":"Tropical staple trees provide important foods, such as bananas and avocado. Compared to annual crops, they have similar yields but higher rates of carbon sequestration."
         }
      ]
   },
   {  
      "name":"Transport",
      "childs":[  
         {  
            "name":"Airplanes",
            "description":"The airline industry produces at minimum 2.5 percent of emissions, and it is growing. Fuel efficiency measures are on the rise to reduce that impact."
         },
         {  
            "name":"Cars",
            "description":"Hybrid cars pair an electric motor and battery with an internal combustion engine. The combination makes them more efficient, improving fuel economy and lowering emissions."
         },
         {  
            "name":"Electric Bikes",
            "description":"Electric bikes get a boost from a small battery-powered motor. They are the most environmentally sound means of motorized transport in the world today."
         },
         {  
            "name":"Electric Vehicles",
            "description":"Electric vehicles are the cars of the future. If powered by solar energy, their carbon dioxide emissions drop by 95 percent compared to gasoline-powered vehicles."
         },
         {  
            "name":"High-speed Rail",
            "description":"High-speed rail is the fastest way to travel distances between 100 to 700 miles. Compared to driving or flying, it reduces emissions up to 90 percent. \f"
         },
         {  
            "name":"Mass Transit",
            "description":"Riding a streetcar, bus, or subway—rather than driving a car or hailing a cab—averts greenhouse gases, relieves traffic congestion, and reduces air pollution."
         },
         {  
            "name":"Ridesharing",
            "description":"Ridesharing pairs drivers and riders who share common origins, destinations, or stops en route. When trips are pooled, people split costs, ease traffic, and curtail emissions."
         },
         {  
            "name":"Ships",
            "description":"Shipping produces 3 percent of global emissions. Fuel-saving ship design, onboard technologies, and practices can have a sizable impact, because of huge shipping volumes."
         },
         {  
            "name":"Telepresence",
            "description":"Telepresence integrates high-performance visual, audio, and network technologies to enable people who are geographically separated to interact. By reducing travel, it can reduce emissions."
         },
         {  
            "name":"Trains",
            "description":"Most trains are powered by diesel-burning engines. Technology and operations can improve fuel efficiency, and rail electrification has the potential to provide nearly emissions-free transport."
         },
         {  
            "name":"Trucks",
            "description":"Road freight is responsible for about 6 percent of global emissions. Increasing fuel efficiency in both new trucks and existing fleets can significantly reduce emissions."
         }
      ]
   },
   {  
      "name":"Electricity Generation",
      "childs":[  
         {  
            "name":"Biomass",
            "description":"Biomass energy is a “bridge” solution for transitioning to 100 percent clean, renewable energy. Using sustainable feedstock—waste biomass or perennial crops—is crucial."
         },
         {  
            "name":"Cogeneration",
            "description":"Power plants produce large amounts of waste heat. Cogeneration systems capture that thermal energy and put it to work—for district heating or additional electricity."
         },
         {  
            "name":"Concentrated Solar",
            "description":"Concentrated solar power uses solar radiation as its primary fuel. Arrays of mirrors concentrate incoming rays to heat a fluid, produce steam, and turn turbines."
         },
         {  
            "name":"Energy Storage (Distributed)",
            "description":"Standalone batteries and electric vehicles make it possible to store energy at home or work. They ensure supply even when variable renewables are not producing."
         },
         {  
            "name":"Energy Storage (Utilities)",
            "description":"Energy storage—daily, multiday, and longer-term or seasonal—is vital to reduce emissions from polluting “peaker” plants and accommodate the shift to variable renewables."
         },
         {  
            "name":"Geothermal",
            "description":"Geothermal power—literally “earth heat”—taps into underground reservoirs of steamy hot water, which can be piped to the surface to drive turbines that produce electricity."
         },
         {  
            "name":"Grid Flexibility",
            "description":"For electricity supply to become predominantly or entirely renewable, the grid needs to become more flexible and adaptable than it is today."
         },
         {  
            "name":"In-Stream Hydro",
            "description":"Placed within a free-flowing river or stream, in-stream turbines capture water’s energy without a dam. In remote communities, they can replace expensive, dirty diesel generators."
         },
         {  
            "name":"Methane Digesters (Large)",
            "description":"Industrial-scale anaerobic digesters control decomposition of organic waste, and thus its methane emissions. They also produce biogas, an energy source, and digestate, a nutrient-rich fertilizer."
         },
         {  
            "name":"Methane Digesters (Small)",
            "description":"At backyard- and farmyard-scale, anaerobic digesters are used to manage organic waste. They control methane emissions, while producing biogas (an energy source) and digestate (nutrient-rich fertilizer)."
         },
         {  
            "name":"Micro Wind",
            "description":"With capacity of 100 kilowatts or less, micro wind turbines are often used to pump water, charge batteries, and provide electrification in rural locations."
         },
         {  
            "name":"Microgrids",
            "description":"A microgrid is a localized grouping of distributed energy sources, like solar and wind, together with energy storage or backup generation and load management tools."
         },
         {  
            "name":"Nuclear",
            "description":"Nuclear power is complex, expensive, and risky, but it has the potential to avoid emissions from fossil fuel electricity. Project Drawdown considers it a \"regrets solution.\""
         },
         {  
            "name":"Rooftop Solar",
            "description":"Rooftop solar is spreading as its cost falls, driven by incentives to accelerate growth, economies of scale in manufacturing, and advances in photovoltaic technology."
         },
         {  
            "name":"Solar Farms",
            "description":"Solar farms tap the sun’s virtually unlimited, clean, and free fuel, using large-scale arrays of hundreds, thousands, or in some cases millions of photovoltaic panels."
         },
         {  
            "name":"Solar Water",
            "description":"Water heating is a major energy use. Solar water heaters use the sun’s radiation and can reduce that energy consumption by 50 to 70 percent."
         },
         {  
            "name":"Waste-to-Energy",
            "description":"Incineration, gasification, and pyrolysis are means of deriving energy from trash. A transitional solution, waste-to-energy can reduce emissions, but has high social and environmental costs."
         },
         {  
            "name":"Wave and Tidal",
            "description":"Wave- and tidal-energy systems harness natural oceanic flows—among the most powerful and constant dynamics on earth—to generate electricity."
         },
         {  
            "name":"Wind Turbines (Offshore)",
            "description":"With competitive costs and investment growing, offshore wind energy is at the crest of initiatives to supply the world with clean power."
         },
         {  
            "name":"Wind Turbines (Onshore)",
            "description":"Proliferation of turbines, dropping costs, and heightened performance mean onshore wind farms are at the forefront of initiatives to address global warming."
         }
        ]
   		},
      {  
      "name":"Coming Attractions",
      "childs":[  
         {  
            "name":"A Cow Walks Onto A Beach",
            "description":"Asparagopsis taxiformis, a species of seaweed, shows promise for reducing methane emissions from livestock—currently 6 to 7 percent of annual greenhouse gas emissions."
         },
         {  
            "name":"Artificial Leaf",
            "description":"The artificial leaf is technology inspired by photosynthesis. It combines solar energy, water, and carbon dioxide, to feed bacteria that synthesize energy-dense fuel."
         },
         {  
            "name":"Autonomous Vehicles",
            "description":"Autonomous vehicles are on the rise. They have the potential to shrink the auto fleet and accelerate ridesharing and the adoption of electric vehicles."
         },
         {  
            "name":"Building With Wood",
            "description":"High-performance wood materials are transforming construction. They can reduce emissions by (1) sequestering and storing carbon and (2) avoiding emissions of cement and steel."
         },
         {  
            "name":"Direct Air Capture",
            "description":"Direct air capture systems are a nascent sequestration technology. Functioning like a chemical sieve and sponge, they capture carbon dioxide from air and release it in purified form."
         },
         {  
            "name":"Enhanced Weathering of Minerals",
            "description":"Natural weathering of silicate rock sequesters carbon dioxide. Enhanced weathering aims to hasten that process by milling rock powder and applying it to landscapes."
         },
         {  
            "name":"Hydrogen-Boron Fusion",
            "description":"Tri Alpha Energy has achieved one-half of the nuclear fusion equation. It could herald clean, safe, affordable energy to take the world beyond fossil fuels."
         },
         {  
            "name":"Hyperloop",
            "description":"The promise of Hyperloop is speed. The virtue is moving people and cargo with 90 to 95 percent less energy than planes, trains, or cars."
         },
         {  
            "name":"Industrial Hemp",
            "description":"Hemp is a global warming solution primarily because of what it can replace: cotton. Cotton has high chemical use and depends on fossil fuel inputs."
         },
         {  
            "name":"Intensive Silvopasture",
            "description":"Intensive silvopasture intercrops a leguminous woody shrub with grasses and trees. Through rapid rotational grazing, livestock yields increase alongside carbon sequestration in soil."
         },
         {  
            "name":"Living Buildings",
            "description":"The Living Building Challenge holistically defines how buildings can benefit both people and planet. One key criteria: Living buildings produce more energy than they use."
         },
         {  
            "name":"Marine Permaculture",
            "description":"Marine permaculture utilizes floating, latticed structures designed to grow rich kelp forests and foster marine life. It could sequester billions of tons of carbon dioxide."
         },
         {  
            "name":"Microbial Farming",
            "description":"Microbes have the potential to dramatically reduce the need for synthetic fertilizers, pesticides, and herbicides, while improving crop yields and plant health."
         },
         {  
            "name":"Ocean Farming",
            "description":"Small-scale ocean farms have the potential to provide sustainable food and biofuel, while oysters filter nitrogen pollution and seaweed sequesters carbon dioxide."
         },
         {  
            "name":"Pasture Cropping",
            "description":"In a pasture cropping system, annual crops are grown in a perennial pasture. Double-cropping grains and animals sequesters carbon and improves farm health and productivity."
         },
         {  
            "name":"Perennial Crops",
            "description":"Perennial crops sequester carbon because they leave the soil intact. Researchers are pursuing grain, cereal, and oilseed plants that are perennial food providers."
         },
         {  
            "name":"Repopulating the Mammoth Steppe",
            "description":"A vast ecosystem called the mammoth steppe once dominated the frozen north. Restoring grazers and grassland could prevent carbon-rich permafrost from thawing and releasing emissions."
         },
         {  
            "name":"Smart Grids",
            "description":"With two-way communication between suppliers and consumers, smart grids accommodate the fluctuations of wind and solar power. They also improve grid stability and overall efficiency."
         },
         {  
            "name":"Smart Highways",
            "description":"The world’s first sustainable highway is being pioneered south of Atlanta, Georgia, emphasizing electric vehicle infrastructure and solar power to reduce carbon emissions."
         },
         {  
            "name":"Solid-state Wave Energy",
            "description":"Solid-state wave energy technology converts the ocean’s kinetic energy without external moving parts. It is more robust in marine environments, rich with untapped renewable energy."
         }
      ]
   }
     
]};

$('document').ready(function(){
  initialize();
});

var CollapseTemplate = {
	params : {
		templateSelector : '.template',
		parentId : 'accordion'
	},

	init : function(_params) {
		this.params = Utils.extend({}, this.params, _params);
	},
	
	load : function(json) {
		$("#" + this.params.parentId).empty();
		var _this = this;
		$.each(json.solutions, function(i, val) {
			_this.draw(val.name, val.childs, undefined);
		});
	},

  //create panel
	draw : function(name, childs, panel, description) {

		//set new id
		var numId = Global.getNextNumCollapseElement();
		var template = $(this.params.templateSelector);
		var $newPanel = template.clone();
		var dataParentId = this.params.parentId;
	
		if (panel !== undefined) {
			dataParentId = $(panel).find(".panel-collapse").attr("id");
		}
		
		$($newPanel).attr("id", "panel" + numId);	
		this.drawHeader(name, $newPanel, numId, dataParentId);
	
		if (childs !== null){	
		 this.drawChildNodesArray(childs, $newPanel, numId);	
	  }

		if (panel === undefined) {
			$("#" + this.params.parentId).append($newPanel.show());
		} else {
			$(panel).find(".panel-body:first").append($newPanel);
			$($newPanel).find(".panel-body").append("<p>"+description+"</p>").addClass("child");
		}
	},
	
	drawHeader : function(name,  $newPanel, numId, dataParentId) {
		$newPanel.find(".collapse").removeClass("in");
		$newPanel.find(".accordion-toggle").attr("href", "#collapse" + numId).text(name).attr(	"data-parent", dataParentId).attr("id", "link-"+numId);
		$newPanel.find(".panel-collapse").attr("id", "collapse" + numId).addClass("collapse").removeClass("in");
		$newPanel.find(".panel-heading").attr("id", "headingOne" + numId);
	},
	
	
	drawChildNodesArray : function(childs, $newPanel, numId) {
		var _this = this;
		$.each(childs, function(i, val) { 
			 _this.draw(val.name, val.childs, $newPanel, val.description);
		});

	}
};

function initialize(){
    var collapseTemplate = Object.create(CollapseTemplate);
    var params = {
        templateSelector: 'div.templateContainer > div.template',
        parentId: 'accordion'
     };
      collapseTemplate.init(params);
      collapseTemplate.load(json);   
};

Global =	{
	countCollapseElements: 0,
	getNextNumCollapseElement : function() {
		return this.countCollapseElements++;
	}
};

Utils = {
	extend : function(dest) {
		var sources = Array.prototype.slice.call(arguments, 1);
		sources.forEach(function(source) {
			Object.keys(source).forEach(function(key) {
				dest[key] = source[key];
			});
		});
		return dest;
	}

};
$('.panel-collapse').on('shown.bs.collapse', function(e) {
    e.preventDefault();  
    e.stopPropagation();

      var $panel = $(this).closest('.panel');
      $('html,body').animate({
        scrollTop: $panel.offset().top
      }, 500);
});